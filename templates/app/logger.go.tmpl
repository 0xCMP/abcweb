package app

import (
	"go.uber.org/zap"
	"go.uber.org/zap/zapcore"
)

// InitLogger initializes a zap logger
func (s *State) InitLogger() {
	var err error

	// JSON logging for production. Should be coupled with a log analyzer
	// like newrelic, elk, logstash etc.
	if s.AppConfig.ProdLogger {
		s.Log, err = zap.NewProduction()
	} else { // Enable colored logging
		cfg := zap.NewDevelopmentConfig()
		cfg.EncoderConfig.EncodeLevel = zapcore.CapitalColorLevelEncoder
		s.Log, err = cfg.Build()
	}

	if err != nil {
		panic("cannot initialize production logger")
	}
}
